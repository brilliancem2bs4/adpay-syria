<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø³Ù„Ù…ÙŠØ© - AdPay Syria</title>
    <!-- PWA App Tags -->
    <meta name="theme-color" content="#047857">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="https://img.icons8.com/color/96/000000/syria.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Ø³Ù„Ù…ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©">
    <link rel="apple-touch-icon" href="https://img.icons8.com/color/144/000000/syria.png">
    <style>
        body { 
            font-family: 'Arial', sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: #f0f9f0; 
            line-height: 1.6;
            text-align: center;
        }
        .container { 
            max-width: 800px; 
            margin: auto; 
        }
        .header { 
            background: linear-gradient(135deg, #047857, #10b981); 
            color: white; 
            padding: 40px 30px; 
            border-radius: 20px; 
            text-align: center; 
            margin-bottom: 30px;
        }
        .step { 
            background: white; 
            padding: 25px; 
            margin: 25px 0; 
            border-radius: 15px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.08); 
            border-right: 5px solid #047857;
            text-align: right;
        }
        .btn { 
            background: #047857; 
            color: white; 
            padding: 15px 30px; 
            text-decoration: none; 
            border-radius: 10px; 
            display: inline-block; 
            margin: 10px; 
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        .btn:hover {
            background: #065f46;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(4, 120, 87, 0.3);
        }
        .whatsapp-number {
            font-size: 28px;
            color: #047857;
            font-weight: bold;
            direction: ltr;
            display: block;
            margin: 15px 0;
            padding: 15px;
            background: #f0fff4;
            border-radius: 10px;
            border: 2px solid #86efac;
        }
        h1 { margin: 0 0 15px 0; font-size: 36px; }
        h2 { color: #047857; margin-top: 0; text-align: right; }
        p { font-size: 18px; color: #333; text-align: right; }
        .emoji { font-size: 24px; margin-left: 10px; }
        .language-switch { text-align: center; margin: 20px 0; }
        .language-btn { 
            background: #e2e8f0; 
            color: #475569; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 8px; 
            margin: 0 5px; 
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
        }
        .language-btn.active { 
            background: #047857; 
            color: white; 
        }
        .pricing-box {
            background: #fffbeb;
            border: 3px solid #f59e0b;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }
        .price-option {
            display: inline-block;
            background: white;
            padding: 20px;
            margin: 10px;
            border-radius: 10px;
            border: 2px solid #047857;
            width: 250px;
            vertical-align: top;
        }
        .price-amount {
            font-size: 36px;
            color: #047857;
            font-weight: bold;
            margin: 10px 0;
        }
        .facebook-group {
            background: #e8f4fd;
            border: 3px solid #1877f2;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
        }
        .facebook-group h3 {
            color: #1877f2;
            margin-top: 0;
        }
        .important-info {
            background: #fef3c7;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 3px solid #f59e0b;
            text-align: right;
        }
        .info-item {
            display: flex;
            align-items: center;
            margin: 15px 0;
            font-size: 20px;
        }
        .info-icon {
            margin-left: 15px;
            font-size: 28px;
        }
        .user-login {
            background: #f0f9ff;
            padding: 20px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px solid #0ea5e9;
        }
        .login-form {
            display: none;
            margin-top: 20px;
        }
        .login-form input {
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 10px;
            width: 80%;
            margin: 10px 0;
            font-size: 16px;
        }
        .user-status {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #f0fff4;
            border-radius: 10px;
        }
        .notification-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #FF9800;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            border: none;
            z-index: 1000;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <button class="notification-btn" onclick="requestNotificationPermission()" id="notifyBtn" style="display: none;">
        ğŸ”” ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    </button>

    <div class="container">
        <div class="language-switch">
            <button class="language-btn active" onclick="switchLanguage('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¾</button>
            <button class="language-btn" onclick="switchLanguage('en')">English ğŸŒ</button>
        </div>
        
        <div class="header" id="header">
            <h1>Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø³Ù„Ù…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©</h1>
            <p id="subtitle">Ø§Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø´Ø§Ù… ÙƒØ§Ø´ Ø£Ùˆ Ø³ÙŠØ±ÙŠØªÙŠÙ„ ÙƒØ§Ø´ - Ù†Ø´Ø± ÙÙˆØ±ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹</p>
        </div>

        <!-- User Login/Code System -->
        <div class="user-login" id="userLogin">
            <h2>ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h2>
            <p>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ Ø®Ø§Øµ ÙŠØ­ÙØ¸ Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙƒ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„Ù„Ø£Ø¨Ø¯!</p>
            <button class="btn" onclick="toggleLoginForm()" id="loginToggleBtn">
                ğŸ‘¤ Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
            </button>
            
            <div class="login-form" id="loginForm">
                <input type="text" id="userCode" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø­Ø±Ù/Ø£Ø±Ù‚Ø§Ù…">
                <label style="display: block; margin: 10px 0;">
                    <input type="checkbox" id="rememberMe"> ØªØ°ÙƒØ±Ù†ÙŠ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²
                </label>
                <button class="btn" onclick="checkUserCode()" style="background: #7C3AED;">
                    ğŸ”“ ÙØªØ­ Ø­Ø³Ø§Ø¨ÙŠ
                </button>
                <button class="btn" onclick="generateNewCode()" style="background: #10b981;">
                    ğŸ†• Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯
                </button>
            </div>
            
            <div class="user-status" id="userStatus">
                <h3>ğŸ“Š Ø­Ø§Ù„Ø© Ø­Ø³Ø§Ø¨Ùƒ:</h3>
                <p id="remainingAds">Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <strong>0</strong></p>
                <p id="userCodeDisplay">ÙƒÙˆØ¯Ùƒ: <strong>------</strong></p>
                <button class="btn" onclick="logout()" style="background: #dc2626;">
                    ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </div>

        <div class="facebook-group">
            <h3>ğŸ“¢ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©:</h3>
            <p>Ø³ÙŠØªÙ… Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ùƒ ÙÙŠ: <strong>Ù…Ø¬Ù…ÙˆØ¹Ø© Ø³Ù„Ù…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©</strong></p>
            <p>ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: <strong>1,400+ Ø¹Ø¶Ùˆ</strong></p>
            <p>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: <strong>Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø³Ù„Ø§Ù…ÙŠØ©ØŒ Ø³ÙˆØ±ÙŠØ§</strong></p>
            <a href="https://www.facebook.com/groups/1403908299911260" target="_blank" class="btn" style="background: #1877f2;">
                ğŸ”— Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ
            </a>
        </div>

        <div class="important-info">
            <h2>âš ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‡Ø§Ù…Ø© Ø¬Ø¯Ø§Ù‹:</h2>
            <div class="info-item">
                <span class="emoji info-icon">â°</span>
                <span>Ø³ÙŠØªÙ… Ø§Ù„Ù†Ø´Ø± Ø®Ù„Ø§Ù„ <strong>120 Ø¯Ù‚ÙŠÙ‚Ø©</strong> Ù…Ù† ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</span>
            </div>
            <div class="info-item">
                <span class="emoji info-icon">ğŸ’¸</span>
                <span>Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø§Ù„ Ø®Ù„Ø§Ù„ <strong>ÙŠÙˆÙ…ÙŠÙ†</strong> ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… Ø§Ù„Ù†Ø´Ø±</span>
            </div>
            <div class="info-item">
                <span class="emoji info-icon">ğŸ”’</span>
                <span>ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø´Ø®ØµÙŠ ÙŠØ­ÙØ¸ Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙƒ Ù„Ù„Ø£Ø¨Ø¯ Ø­ØªÙ‰ Ù„Ùˆ ØªØ±ÙƒØª Ø§Ù„Ù…ÙˆÙ‚Ø¹</span>
            </div>
        </div>

        <div class="pricing-box">
            <h2>ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨Ø³ÙŠØ·Ø©</h2>
            <div class="price-option">
                <h3>Ø¥Ø¹Ù„Ø§Ù† ÙˆØ§Ø­Ø¯</h3>
                <div class="price-amount">10 Ù„.Ø³</div>
                <p>ÙŠÙ†Ø´Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</p>
                <p>ÙŠÙ†Ø´Ø± Ø®Ù„Ø§Ù„ 120 Ø¯Ù‚ÙŠÙ‚Ø©</p>
                <a href="form.html" class="btn" onclick="return checkAdsBeforeRedirect()">ğŸ“ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</a>
            </div>
            <div class="price-option">
                <h3>20 Ø¥Ø¹Ù„Ø§Ù†</h3>
                <div class="price-amount">100 Ù„.Ø³</div>
                <p>ØªÙˆÙÙŠØ± 50% (5 Ù„ÙŠØ±Ø© Ù„ÙƒÙ„ Ø¥Ø¹Ù„Ø§Ù†)</p>
                <p>Ù„Ø§ ØªÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØªÙ‡Ø§</p>
                <p>Ù†Ø´Ø± 20 Ø¥Ø¹Ù„Ø§Ù† Ù…Ø®ØªÙ„Ù</p>
                <p>Ù…Ø®Ø²ÙˆÙ†Ùƒ ÙŠØ­ÙØ¸ Ø¨ÙƒÙˆØ¯ Ø®Ø§Øµ</p>
                <a href="form.html" class="btn" onclick="return checkAdsBeforeRedirect()">ğŸ“ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</a>
            </div>
        </div>

        <div class="step">
            <h2><span class="emoji">ğŸ“±</span> <span id="step1-title">Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù…Ù„Ø£ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</span></h2>
            <p id="step1-desc">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙ†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† ÙÙ‚Ø·</p>
            <a href="form.html" class="btn" onclick="return checkAdsBeforeRedirect()">âœï¸ Ø§Ø¨Ø¯Ø£ Ø¨Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</a>
        </div>

        <div class="step">
            <h2><span class="emoji">ğŸ’°</span> <span id="step2-title">Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ø¯ÙØ¹ Ø¨Ø³Ù‡ÙˆÙ„Ø©</span></h2>
            <p id="step2-desc">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</p>
            <div>
                <a href="whatsapp.html?method=sham" class="btn" style="background: #7C3AED;" onclick="return checkAdsBeforeRedirect()">ğŸ’œ Ø´Ø§Ù… ÙƒØ§Ø´</a>
                <a href="whatsapp.html?method=syriatel" class="btn" style="background: #E63946;" onclick="return checkAdsBeforeRedirect()">â¤ï¸ Ø³ÙŠØ±ÙŠØªÙŠÙ„ ÙƒØ§Ø´</a>
            </div>
        </div>

        <div class="step">
            <h2><span class="emoji">ğŸ“²</span> <span id="step3-title">Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø£Ø±Ø³Ù„ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹</span></h2>
            <p id="step3-desc">Ø£Ø±Ø³Ù„ Ù„Ù‚Ø·Ø© Ø§Ù„Ø¯ÙØ¹ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ³Ù†Ù†Ø´Ø± Ø®Ù„Ø§Ù„ 120 Ø¯Ù‚ÙŠÙ‚Ø©</p>
            <div class="whatsapp-number">
                ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨: +963 993 113 374
            </div>
        </div>

        <div class="step">
            <h2><span class="emoji">âœ…</span> <span id="step4-title">Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†Ø´ÙˆØ±</span></h2>
            <p id="step4-desc">Ø³Ù†Ø±Ø³Ù„ Ù„Ùƒ Ø±Ø§Ø¨Ø· Ù…Ù†Ø´ÙˆØ±Ùƒ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ø®Ù„Ø§Ù„ 120 Ø¯Ù‚ÙŠÙ‚Ø©</p>
        </div>

        <div class="important-info" style="background: #f0fdf4; border-color: #047857;">
            <h2>ğŸ“‹ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…:</h2>
            <p>âœ… Ø§Ù„Ù†Ø´Ø± Ø®Ù„Ø§Ù„ 120 Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰</p>
            <p>âœ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø§Ù„ Ø®Ù„Ø§Ù„ 48 Ø³Ø§Ø¹Ø© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ù†Ø´Ø±</p>
            <p>âœ… Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙˆØ¯ ÙŠØ­ÙØ¸ Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙƒ Ù„Ù„Ø£Ø¨Ø¯</p>
            <p>âŒ Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø³ÙŠØ¡ Ø£Ùˆ ØºÙŠØ± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ</p>
            <p>â° ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„: 9 ØµØ¨Ø§Ø­Ø§Ù‹ - 12 Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„</p>
        </div>
    </div>

    <!-- Firebase for Notifications -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-messaging-compat.js"></script>
    
    <script>
        // User Code System
        function toggleLoginForm() {
            const form = document.getElementById('loginForm');
            const btn = document.getElementById('loginToggleBtn');
            
            if (form.style.display === 'block') {
                form.style.display = 'none';
                btn.innerHTML = 'ğŸ‘¤ Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ';
            } else {
                form.style.display = 'block';
                btn.innerHTML = 'ğŸ‘† Ø¥Ø®ÙØ§Ø¡ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¯Ø®ÙˆÙ„';
            }
        }

        function generateNewCode() {
            // Generate 6-character code
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            // Save to localStorage
            const userData = {
                code: code,
                adsRemaining: 0,
                created: new Date().toISOString(),
                lastLogin: new Date().toISOString()
            };
            
            localStorage.setItem('adpay_user_' + code, JSON.stringify(userData));
            
            // Show success message
            alert(`ğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯ Ù„Ùƒ!\n\nÙƒÙˆØ¯Ùƒ: ${code}\n\nâš ï¸ Ø§Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ù…Ù†!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ø¹Ù„Ù‰ Ø£ÙŠ Ø¬Ù‡Ø§Ø² ÙˆÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.`);
            
            // Auto-login
            loginWithCode(code);
        }

        function checkUserCode() {
            const code = document.getElementById('userCode').value.trim().toUpperCase();
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (code.length !== 6) {
                alert('âŒ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù/Ø£Ø±Ù‚Ø§Ù…');
                return;
            }
            
            loginWithCode(code, rememberMe);
        }

        function loginWithCode(code, remember = false) {
            const userKey = 'adpay_user_' + code;
            let userData = localStorage.getItem(userKey);
            
            if (!userData) {
                // Create new account if not exists
                userData = {
                    code: code,
                    adsRemaining: 0,
                    created: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                localStorage.setItem(userKey, JSON.stringify(userData));
            } else {
                userData = JSON.parse(userData);
                userData.lastLogin = new Date().toISOString();
                localStorage.setItem(userKey, JSON.stringify(userData));
            }
            
            // Save current session
            sessionStorage.setItem('current_user_code', code);
            if (remember) {
                localStorage.setItem('remembered_user_code', code);
            }
            
            // Update UI
            showUserStatus(userData);
        }

        function showUserStatus(userData) {
            document.getElementById('userLogin').style.display = 'none';
            document.getElementById('userStatus').style.display = 'block';
            document.getElementById('remainingAds').innerHTML = 
                `Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <strong>${userData.adsRemaining}</strong>`;
            document.getElementById('userCodeDisplay').innerHTML = 
                `ÙƒÙˆØ¯Ùƒ: <strong>${userData.code}</strong>`;
        }

        function logout() {
            sessionStorage.removeItem('current_user_code');
            localStorage.removeItem('remembered_user_code');
            location.reload();
        }

        function checkAdsBeforeRedirect() {
            const currentUser = sessionStorage.getItem('current_user_code') || 
                               localStorage.getItem('remembered_user_code');
            
            if (currentUser) {
                const userKey = 'adpay_user_' + currentUser;
                const userData = JSON.parse(localStorage.getItem(userKey) || '{"adsRemaining":0}');
                
                if (userData.adsRemaining > 0) {
                    // User has ads remaining, allow direct posting
                    return true;
                } else {
                    // No ads remaining, user needs to pay
                    alert(`âš ï¸ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©.\n\nØ¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${userData.adsRemaining}\n\nÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©.`);
                    return false;
                }
            }
            return true; // Allow if no user logged in (will create new)
        }

        // Check if user is remembered on page load
        window.onload = function() {
            const rememberedCode = localStorage.getItem('remembered_user_code');
            if (rememberedCode) {
                loginWithCode(rememberedCode);
            }
            
            // Check session
            const sessionCode = sessionStorage.getItem('current_user_code');
            if (sessionCode) {
                const userKey = 'adpay_user_' + sessionCode;
                const userData = JSON.parse(localStorage.getItem(userKey) || '{"adsRemaining":0}');
                showUserStatus(userData);
            }
            
            // Show notification button
            document.getElementById('notifyBtn').style.display = 'block';
        };

        function switchLanguage(lang) {
            // Language switching logic
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (lang === 'en') {
                document.getElementById('header').innerHTML = `
                    <h1>Ad Publishing in New Salmiya Advertising Group</h1>
                    <p>Pay via Sham Cash or Syriatel Cash - Instant publishing after payment</p>
                `;
                document.getElementById('subtitle').textContent = 'Pay via Sham Cash or Syriatel Cash - Instant publishing after payment';
                document.getElementById('step1-title').textContent = 'Step 1: Fill Ad Request';
                document.getElementById('step1-desc').textContent = 'Enter WhatsApp number and ad text only';
                document.getElementById('step2-title').textContent = 'Step 2: Easy Payment';
                document.getElementById('step2-desc').textContent = 'Choose payment method:';
                document.getElementById('step3-title').textContent = 'Step 3: Send Payment Proof';
                document.getElementById('step3-desc').textContent = 'Send payment screenshot on WhatsApp and we publish within 120 minutes';
                document.getElementById('step4-title').textContent = 'Step 4: Receive Post Link';
                document.getElementById('step4-desc').textContent = 'We send you post link on WhatsApp within 120 minutes';
            } else {
                location.reload();
            }
        }

        // Firebase Notification System
        const firebaseConfig = {
            apiKey: "AIzaSyDUqKQ-6SbjZpxLgSpksN8AqV2qUYBrvYk",
            authDomain: "adpay-syria.firebaseapp.com",
            projectId: "adpay-syria",
            storageBucket: "adpay-syria.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef1234567890"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const messaging = firebase.messaging();

        function requestNotificationPermission() {
            Notification.requestPermission().then((permission) => {
                if (permission === 'granted') {
                    console.log('Notification permission granted.');
                    // Get FCM token
                    messaging.getToken().then((currentToken) => {
                        if (currentToken) {
                            console.log('FCM Token:', currentToken);
                            // Save token to localStorage
                            localStorage.setItem('fcm_token', currentToken);
                            alert('âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª!');
                            document.getElementById('notifyBtn').style.display = 'none';
                        }
                    });
                }
            });
        }

        // Handle incoming messages
        messaging.onMessage((payload) => {
            console.log('Message received:', payload);
            // Show notification
            if (Notification.permission === 'granted') {
                new Notification(payload.notification.title, {
                    body: payload.notification.body,
                    icon: 'https://img.icons8.com/color/96/000000/syria.png'
                });
            }
        });

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('Service Worker registered:', registration);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
